"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5713],{95289:(e,t,a)=>{a.d(t,{A:()=>f});var n=a(67294),r=a(94184),l=a.n(r),i=a(28760),o=a(62312),s=a(41374),c=a(20246),m=a(58238),u=a(91883),d=a(30005),g=a(36652),E=a(21691),p=a(28248);const y=({heading:e,selected:t,onSelect:a,options:r,sortOrder:l})=>{let o;return l&&(l===p.kn.ASC||l===p.kn.SECONDARY_ASC?o=n.createElement(m.C,{iconSize:16}):l!==p.kn.DESC&&l!==p.kn.SECONDARY_DESC||(o=n.createElement(u.B,{iconSize:16}))),n.createElement(d.v,null,e?n.createElement(g.F,null,e):null,r.map((({key:e,value:r})=>n.createElement(E.s,{role:"menuitemradio","aria-checked":e===t.key&&!o,key:e,onClick:()=>a(e),icon:e===t.key&&o},n.createElement(i.Dy,{variant:"mesto"},r)))))},k="w6j_vX6SF5IxSXrrkYw5",h="CbHJjxYxldG7uUPMYMaP";const f=({heading:e,options:t,selected:a,onSelect:r,isSelectionChanged:m,sortOrder:u,variant:d="mesto",semanticColor:g,disabled:E,onClick:p})=>{const[f]=t;a||(a=f);const b=m?m(a):a!==f;return n.createElement(c.y,{menu:n.createElement(y,{selected:a,options:t,onSelect:r,sortOrder:u,heading:e})},((e,t,r)=>n.createElement("button",{className:l()(k,{[h]:b}),onClick:e=>{E||(p?.(e),t(e))},ref:r,type:"button"},n.createElement(i.Dy,{semanticColor:g,variant:d},a.value),e?n.createElement(o.U,{iconSize:16}):n.createElement(s.i,{iconSize:16}))))}},47917:(e,t,a)=>{a.d(t,{V:()=>R,e:()=>A});var n=a(67294),r=a(86706),l=a(69518),i=a.n(l),o=a(33702),s=a(84629),c=a(43914),m=a(25988),u=a(68556),d=a(95806),g=a(99191),E=a(56802),p=a(38894),y=a(80219),k=a(18261),h=a(62975),f=a(87257),b=a(57978),v=a(75016),C=a(42922),P=a(18864),S=a(52759),N=a(54444),w=a(7073),x=a(84788);function A(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const I=e=>`activation-trigger-mme-${e}`,R=n.memo((function({index:e=-1,showMetadata:t,episode:a,usePlayContextItem:l,status:R,variant:U}){const D=(0,r.oR)().getState().platform?.isBrowser,L=a.playedState.playPositionMilliseconds,B=a.uri,F=(0,n.useRef)(null),[M,O]=(0,n.useState)(a.playedState.state===w.sY.Completed),z=(0,g.O1)(),T=(0,p.g)(),_=(0,P.jh)(),G=(0,E.o)(),W=(0,r.I0)(),{UBIFragment:X,spec:H,logger:j}=(0,N.fU)(o.createDesktopEpisodeBlockEventFactory,{data:{uri:B,reason:a.requestId||"",position:e}}),q=(0,N.Wi)(H),{isActive:Y,isPlaying:V,togglePlay:K}=l({uri:B}),[Z]=(0,S.z)(1e4,(e=>e?.item?.uri===B));(0,n.useEffect)((()=>{V&&(F.current=Z)}),[V,Z]),(0,n.useEffect)((()=>{!V&&F.current&&a.duration.milliseconds<=F.current&&O(!0)}),[V,a.duration.milliseconds]);const Q=(0,n.useCallback)((e=>{e||(F.current=0),O(e)}),[]),J=A(t),$=(0,y.s)({...a,coverArt:{sources:a.coverArt}},J),ee=(0,n.useCallback)((()=>{if(a.episodeType===w.Wf.Episode&&D)h.y.set((()=>({triggerId:I(a.uri),triggerAction:null})));else if(T)$();else{let e;e=V?H.playButtonFactory().hitPause({itemToBePaused:B}):Y?H.playButtonFactory().hitResume({itemToBeResumed:B}):H.playButtonFactory().hitPlay({itemToBePlayed:B});const t=j.logInteraction(e);G({targetUri:B,intent:V?"pause":"play",type:"click"}),K({loggingParams:t})}}),[Y,$,G,K,B,V,T,a,D,j,H]),te=(0,n.useCallback)((()=>{j.logInteraction(H.hitUiNavigate({destination:B})),G({type:"click",targetUri:B,intent:"navigate"})}),[B,G,j,H]),ae=a.podcastSubscription?.isPaywalled??!1,ne=a.podcastSubscription?.isUserSubscribed??!1,re=ae&&!ne,le=ae&&T,{badges:ie}=(0,x.r)({contentRating:a.contentRating?.label,isPaywalled:ae}),oe=(0,n.useCallback)((()=>W((0,s.RM)(t.uri))),[t.uri,W]),se=(0,n.useCallback)((e=>{let r=e;return(re||le)&&(r=n.createElement(d.l,{enabled:!0,showUri:t.uri},r)),!a.playability.playable&&ie.nineteen&&(r=n.createElement("div",{onClick:e=>{e.stopPropagation(),oe()}},e)),r=n.createElement(c.D,{id:I(B),targetURI:i().from(B)},r),r}),[B,re,le,t.uri,ie.nineteen,a.playability.playable,oe]);return n.createElement(X,{spec:H},n.createElement(C.ZP,{value:"row",index:e},n.createElement(k._,{onShow:()=>{j.logInteraction(H.secondaryHitUiReveal())},menu:n.createElement(m.k,{uri:B,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:M,onMarkAsPlayed:Q})},n.createElement(u.X,{ref:q,requestId:a.requestId,index:e,uri:B,size:_,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||re,fullyPlayed:M,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:F.current??L,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const n=`${a.name} • ${t.name}`;z(e,[B],n,t.uri)},handlePlaybackClick:ee,handleClick:te,isCurrentlyPlaying:Y,isPaywalled:ae,isUserSubscribed:ne,isPlaying:V,position:V?Z:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:Q,contentInformation:a.contentInformation,badges:n.createElement(n.Fragment,null,ie.explicit&&n.createElement(f.N,null),ie.paid&&n.createElement(v.g,null),ie.nineteen&&n.createElement(b.X,{size:16})),playButtonWrapper:se,onMoreButtonClick:()=>{j.logInteraction(H.moreButtonFactory().hitUiReveal())},status:R,variant:U}))))}))},34777:(e,t,a)=>{a.r(t),a.d(t,{default:()=>pa});var n=a(67294),r=a(51615),l=a(69518),i=a.n(l),o=a(87577),s=a(14556),c=a(96206),m=a(70369),u=a(1663),d=a(42745),g=a(73305),E=a(28760),p=a(728),y=a(56802),k=a(25678),h=a(49961),f=a(85105);const b="GPPWAsVio35hH080drEK",v="f8FyVnjsXfG9VtTzk9Df",C="tpOdce3HYBF6ASz4MXdr",P="p9AillvR7MCZkOrv3U3h",S="zMqHdOQtjEEbcMV7YHe9",N="zPJ5qeQhpgUvKpAAlNpA",w="n3G4Y43jgF6wXOuj0X44",x=n.memo((function({coverArt:e,showAccessInfo:t,isOpen:a,toggleModal:l,backgroundColor:i}){const o=(0,r.k6)(),s=(0,y.o)();if((0,n.useEffect)((()=>{s({type:"view",intent:"audiobook-gated-entry-point"})}),[s]),!t||!t.partnerLink)return null;const{partnerLink:{title:c,body:m,soaPartners:u}}=t,d=(0,h.X)(e,{desiredSize:640}),g={"--bg-color":i};return n.createElement(f.Z,{contentLabel:"activation-modal",isOpen:a,onRequestClose:l},n.createElement("div",{className:b,style:{...g}},n.createElement(k.Ee,{loading:"lazy",src:d?.url,className:v}),n.createElement("div",{className:C},n.createElement(E.Dy,{as:"p",variant:"canon",className:P},c),n.createElement(E.Dy,{as:"p",className:S},m),u&&u?.map((e=>n.createElement("a",{href:e.linkUrl,className:N,key:e.linkUrl,onClick:()=>{s({type:"click",intent:"navigate-to-access-provider",itemIdSuffix:e.displayName}),l(),o.replace("?isUnlockingAudiobook=true")}},n.createElement("img",{src:e.logoUrl||"",alt:"",width:"24px"}),n.createElement("span",{className:w},n.createElement(E.Dy,{variant:"ballad"},e.displayName," ")),n.createElement(p.V,{iconSize:16})))))))}));var A=a(95661),I=a(22345),R=a(94184),U=a.n(R),D=a(67892);const L="nLNTsyonBwoRIzAv1AME",B="E4I5I7G2CfW32hLWZaqE",F=({title:e,uri:t,className:a,onClick:r,position:l})=>{const i=(0,n.useCallback)((e=>{r?.(e,{uri:t,position:l})}),[r,l,t]);return n.createElement(D.r,{"aria-label":e,className:U()(B,a),to:t,onClick:i},n.createElement(E.Dy,{dir:"auto",variant:"mestoBold"},e))};function M(e){return!!e.uri&&!!e.title}const O=({topics:e,className:t,onClick:a})=>n.createElement("div",{className:U()(L,t)},e.filter(M).map(((e,t)=>n.createElement(F,{key:e.uri,title:e.title,uri:e.uri,position:t,onClick:a}))));var z=a(20246),T=a(94233),_=a(44887),G=a(7469),W=a(42781);const X={container:"SpVoh9vvBN0kIwzfCiBh",isActive:"nsGHaEmn310z9W4RMbb8",title:"PfYVlZzroXSurDmS_kxY",main:"kCT99_BcJQtW47mEfVF6",titleContainer:"gmDgEbPyRXNixmjYAT9f",duration:"itbbweiDUhLIrwEjSRWv",trailerContainer:"XlZGcb86bItwlMPQ2jOf",image:"VGTtqfOlX2jIbpff6mPP",imageContainer:"aexqooSgfdW95poEaxjH",playButton:"Fui2wGupk4F1Khigbrhj",entityImageLarge:"jWcvSz47NFpbLjnkFT1O",entityImageSmall:"Oo6MP8F01W5uGlnw8dag"};var H=a(55911),j=a(33985),q=a(87257),Y=a(57978),V=a(95775),K=a(84788),Z=a(85592);let Q;!function(e){e.SMALL="small",e.LARGE="large"}(Q||(Q={}));const J=({images:e,title:t,contentRating:a,duration:r,moreButton:l,onClick:i,onContextMenu:o,onTouchStart:s,onTouchEnd:c,isPlaying:m,isActive:u,size:d,className:g,label:p})=>{const y=d===Q.LARGE?"md":"sm",{badges:k}=(0,K.r)({contentRating:a});return n.createElement("div",{"data-testid":"trailer-component",className:U()(X.container,g,{[X.isActive]:u}),onContextMenu:o,onTouchStart:s,onTouchEnd:c},n.createElement("div",{className:X.main},n.createElement("div",{className:X.imageContainer},n.createElement(_.O,{type:W.p.EPISODE,title:t,className:U()(X.image,{[X.entityImageSmall]:d===Q.SMALL,[X.entityImageLarge]:d===Q.LARGE}),size:G.m$.SIZE_56,images:e,shape:_.K.ROUNDED_CORNERS}),n.createElement("div",{className:X.playButton},n.createElement(Z.fh,{"data-testid":"trailer-play-button",version:H.ul.transparent,size:y,isPlaying:m,onClick:i}))),n.createElement("div",{className:X.metadata},n.createElement("div",{className:X.titleContainer},n.createElement(E.Dy,{dir:"auto",className:X.title,variant:"balladBold"},t)),n.createElement("div",{className:X.trailerContainer},n.createElement(V.V,{text:p}),k.explicit&&n.createElement(q.N,null),k.nineteen&&n.createElement(Y.X,null),n.createElement(E.Dy,{dir:"auto",variant:"mesto"},n.createElement(j.nL,{durationMs:r}))))),l)};var $=a(40080),ee=a(43620),te=a(84242),ae=a(9983),ne=a(27999),re=a(54444),le=a(10149),ie=a(99450);const oe="QEd1L2SSRW1ol_sQQN6m",se="ENuWK8u3C9kmadnqkErf",ce="i0gSVhns0PjhiUKm4OG1",me="jKVb6K0dga3SfW1dp2Pg",ue="MOpV0_YizQER2NksxLju",de="vrR8bh9DvivyDfUrh1vD",ge="_toO3CqMPAPTbny7Rh8R",Ee="Iudw61HRePwOAJpbDRvA",pe="GWaz1n1SADn9enzKdi_Z",ye=n.memo((function({coverArt:e,toggleModal:t,uri:a,spec:r,logger:l}){const i=(0,h.X)(e,{desiredSize:320});return n.createElement(f.Z,{contentLabel:"podcast-rating-modal",isOpen:!0,onRequestClose:t},n.createElement("div",{className:oe},n.createElement("div",{className:ce},n.createElement(E.Dy,{as:"h1",variant:"canon",className:ge},"Rate audiobook"),n.createElement("button",{className:me,onClick:()=>{const e=r.pageFactory({identifier:a}).closeButtonFactory().hitUiNavigateBack();l.logInteraction(e),t()}},n.createElement(le.k,{role:"presentation"}),n.createElement("span",{className:"hidden-visually"},"Close modal"))),n.createElement("div",{className:ue},n.createElement(k.Ee,{loading:"eager",src:i?.url,className:se}),n.createElement("div",{className:de},n.createElement(E.Dy,{as:"p",variant:"cello",className:Ee},"Want to rate this audiobook?"),n.createElement(E.Dy,{as:"p",className:pe},"Head over to the Spotify app to rate this and other titles."),n.createElement(ie.D,{colorSet:"invertedLight",onClick:()=>{const e=r.pageFactory({identifier:a}).okButtonFactory().hitUiNavigateBack();l.logInteraction(e),t()}},"Ok")))))}));var ke=a(20238);const he={sectionTitle:"igKG5CnS4gyhXQWp5GVu",author:"E8g_EyijtSREXL0vMFbL",narrator:"Pc8AKn4KmzHwEw8lPiSb",topics:"yE1clVJOE3LrEuOvUxxq"},fe=({htmlDescription:e,narrators:t})=>{const a=(0,y.o)(),r=(0,n.useCallback)((()=>{a({intent:"expand-description",type:"click"})}),[a]);return n.createElement(n.Fragment,null,t.length?n.createElement(E.Dy,{as:"p",variant:"ballad",className:he.narrator},c.ag.get("web-player.audiobooks.narratedByX",t.join(c.ag.getSeparator()))):null,e&&n.createElement(ke.o,{maxLines:4,content:e,htmlContent:e,LinkComponent:D.Z,onExpanded:r,className:he.description}))};var be=a(4383),ve=a(90110);const Ce=n.memo((function({uri:e,size:t=ve.q.md,className:a,onClick:r}){const[l,i]=(0,be.Z)(e),o=(0,y.o)(),s=(0,n.useCallback)((()=>{o({targetUri:e,intent:l?"unsave":"save",type:"click"}),i(!l)}),[o,e,l,i]);return n.createElement(ve.o,{className:a,isFollowing:l,onFollow:s,onClick:r,uri:e,size:t})}));var Pe=a(28137);const Se="fh0UJnx_1gVzGAmFaePG",Ne="CtQWnvRuRmBLt50eOSQL";var we=a(30947),xe=a(11414),Ae=a(32626),Ie=a(98778),Re=a(55120),Ue=a(4236);const De=n.memo((({children:e})=>n.createElement("div",{className:Se},e))),Le=n.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:r,isExplicit:l,togglePlay:i,isLocked:o,duration:s,publishDate:m,price:u}){const[d,g]=(0,be.Z)(t),p=!(0,Ue.k)(),k=(0,y.o)(),h=(0,n.useCallback)((()=>{k({targetUri:t,intent:d?"unsave":"save",type:"click"}),g(!d)}),[k,t,d,g]);return n.createElement(we.o,{backgroundColor:e},u&&n.createElement(De,null,n.createElement(E.Dy,{variant:"celloCanon",semanticColor:"textBase"},u.finalPrice?.formattedPrice),n.createElement(E.Dy,{variant:"mesto",semanticColor:"textSubdued",style:{textDecoration:"line-through",marginInlineStart:"10px"}},u.finalListPrice?.formattedPrice)),n.createElement(De,null,l&&n.createElement(q.N,null),n.createElement("div",null,m&&n.createElement(E.Dy,{variant:"mesto",className:Ne},c.ag.formatDate(m)),n.createElement(E.Dy,{variant:"mesto"},n.createElement(j.nL,{durationMs:s})))),n.createElement(we.F,null,n.createElement(Re.$,{onClick:()=>i(),isPlaying:r,size:H.qE.lg,uri:t,locked:o}),n.createElement(Ie.r,{key:"follow-button"},n.createElement(xe.H,{isAdded:d,onClick:h,disabled:p,size:xe.q.md,isAudiobook:!0})),o&&n.createElement(Ce,{uri:t}),n.createElement(Ae.yj,{menu:n.createElement(Pe.X,{uri:t})},n.createElement(A.z,{label:c.ag.get("more.label.context",a)}))))}));var Be=a(42273),Fe=a(59482),Me=a(72907);const Oe=n.memo((function({coverArt:e,name:t,authorName:a,uri:r,backgroundColor:l,isPlaying:i,togglePlay:o,isLocked:s}){return n.createElement(Be.gF,{backgroundColor:l},n.createElement(Fe.W,null,n.createElement(Re.$,{size:H.qE.sm,onClick:()=>o(),isPlaying:i,uri:r,locked:s}),n.createElement(Me.i,{text:t,dragUri:r,dragLabel:t})),n.createElement(Ae._P,{menu:n.createElement(Pe.X,{uri:r})},n.createElement(Be.Oz,{images:e,name:t,shape:_.K.ROUNDED_CORNERS})),n.createElement(Be.sP,null,n.createElement(Be.dy,{small:!0,uppercase:!0},c.ag.get("web-player.audiobooks.audiobook")),n.createElement(Be.xd,{canEdit:!1,onClick:()=>{}},t),n.createElement(Be.QS,{author:a})))}));var ze=a(77868),Te=a(89116);const _e="_yl4tOZxcpoUt28k6B8I",Ge="lcJflizNrSwDM9yPNk6h",We="ret7iHkCxcJvsZU14oPY",Xe=({rating:e,className:t,onClick:a})=>{const r=e?.rating?.rating?ze.u:Te.G;if(!e)return null;const l=e.averageRating?.showAverage?n.createElement(E.Dy,{variant:"mesto",className:U()(We)},"(",c.ag.formatNumberCompact(Number(e.averageRating.totalRatings)),")"):null;return n.createElement("button",{className:U()(_e,t),onClick:a},n.createElement(E.Dy,{dir:"auto",variant:"mestoBold"},e?.averageRating?.showAverage&&e.averageRating?.average?e.averageRating?.average:e?.rating?.rating?e.rating.rating:c.ag.get("web-player.audiobooks.noRating")),n.createElement(r,{iconSize:16,className:U()(Ge)}),l)},He=({rating:e,onClick:t})=>n.createElement(Xe,{rating:e,onClick:t});var je=a(33241),qe=a(192);var Ye=a(86649),Ve=a(60410),Ke=a(75016),Ze=a(26010),Qe=a(69010),Je=a(8341),$e=a(5944),et=a(92408),tt=a(31610);const at="BO8KtKFwgSHtMt6PAmuv",nt="b0Vng72SrQiFroJKXfk2",rt="eWxDd0LanTnTlSl8SOHX",lt="eAOkseqV13_CAmzuDJpa",it="fovofKIYdEIURgIYoKm2",ot="we_1b4qCQBaFPT12eUXp",st="NXXFrQO7npgPCRuSKaAA",ct="ekkhhuxKVGAzkEmuh9kE",mt="zd6xqobF255bxHFtCmXy",ut=n.memo((function({name:e,duration:t,uri:a,bookUri:l,bookName:o,usePlayContextItem:s,isLocked:m,isPlayable:u,resumePositionMs:d,isFullyPlayed:g,toggleActivationModal:p,isExplicit:k,is19PlusOnly:h}){const f=(0,r.k6)(),b=i().from(a).toURLPath(!0),[v,C]=(0,n.useState)(g),P=(0,n.useRef)(d),{isPlaying:S,togglePlay:N}=s({uri:a}),w=(0,Je.Y)((e=>{if(e?.item?.uri===a){const t=(0,$e.k)(e)??0;return P.current=t,t}return 0})),{useDownloading:x}=(0,n.useContext)(Ze.I),{currentAvailability:R}=x(a),L=[Qe.V8.YES,Qe.V8.DOWNLOADING,Qe.V8.WAITING].includes(R),B=(0,n.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),F=(0,n.useCallback)((e=>{B(e),b&&f.push(b)}),[B,b,f]),M=(0,y.o)(),O=(0,n.useCallback)((e=>{B(e),m?(M({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),p()):N()}),[m,M,B,p,N]),z=(0,n.useCallback)((e=>{e||(P.current=0),C(e)}),[]);return n.createElement(Ae._P,{menu:n.createElement(I.r,{uri:a,showUri:l,isPlayed:v,onMarkAsPlayed:z})},n.createElement("div",{className:lt},n.createElement(D.r,{to:a,onClick:F,className:at,tabIndex:-1},n.createElement("hr",{className:rt,"aria-hidden":!0}),n.createElement("div",{className:nt},n.createElement(E.Dy,{as:"h2",variant:"balladBold",className:st,semanticColor:"textBase"},e),n.createElement("div",{className:ct},n.createElement(Z.fh,{size:"sm",version:Z.ul.secondary,onClick:O,isPlaying:S,ariaPlayLabel:c.ag.get("tracklist.a11y.play",e,o),ariaPauseLabel:c.ag.get("tracklist.a11y.pause",e,o),locked:m,disabled:!u&&!m}),m?n.createElement(Ke.g,null):null,k&&n.createElement(q.N,null),h&&n.createElement(Y.X,{size:16}),n.createElement("div",{className:mt},n.createElement(et.E,{isPlaying:S,fullyPlayed:v,durationMs:t.milliseconds,resumePositionMs:P.current,position:S?w:void 0}))),n.createElement(Ae.yj,{menu:n.createElement(I.r,{uri:a,showUri:l,isPlayed:v,onMarkAsPlayed:z})},n.createElement(A.z,{className:it,size:tt.q.sm,label:c.ag.get("more.label.context",e),onClick:B})),n.createElement(tt.o,{uri:a,bookUri:l,className:U()({[ot]:!L}),onClick:B,size:tt.q.sm})))))})),dt=({bookUri:e,bookName:t,isFinishedUnlockingJourney:a,usePlayContextItem:r,toggleModal:l,setIsLocked:i})=>{const o=function(e,t){const a=(0,qe.z)();return(0,n.useCallback)((async(n,r)=>a.getBookContents(e,{offset:n,limit:r,doRefreshSubscription:t})),[t,a,e])}(e,a),s=(0,n.useRef)(!1),c=(0,n.useRef)(0),[m,u]=(0,n.useState)([]),d=(0,n.useCallback)((()=>{o&&(s.current||null===c.current||(s.current=!0,o(c.current,50).then((e=>{s.current=!1,c.current=e.nextOffset,e.items.length>0&&u((t=>t.concat(e.items)))}))))}),[o]);return(0,n.useEffect)((()=>{i((0,Ve.g)(m))}),[m,i]),n.createElement("ul",null,n.createElement(je.C,{onReachBottom:d,triggerOnInitialLoad:!0},m.map((a=>{const{name:i,duration:o,uri:s,playability:{playable:c},playedState:{playPositionMilliseconds:m,state:u},isExplicit:d,is19PlusOnly:g}=a;return n.createElement(ut,{name:i,duration:o,uri:s,bookUri:e,bookName:t,key:s,usePlayContextItem:r,isLocked:(0,Ve.S)(a),isPlayable:c,resumePositionMs:m,isFullyPlayed:u===Ye.sY.Completed,toggleActivationModal:l,isExplicit:d,is19PlusOnly:g})}))))},gt={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",BookPage:"mmCZ5VczybT9VqKB5wFU",bookContent:"At_ihDspJfh1yw3Cn2cq",metadataLeft:"Yqz1Nv6wj1n3HmXL_qji",metadataRight:"qRqn3JrWLPbGW9k2a63n",ratingAndTopics:"HAah1_lK_dHgyyE71I8Z",chapters:"eiC4nh70nb5UHZBYMgNA"},Et=n.memo((function({metadata:e}){const{uri:t,coverArt:a,name:l,htmlDescription:i,authorName:o,sample:s,narrators:u,rating:E,isExplicit:p,duration:k,copyrights:h,publishDate:f,price:b}=e,{search:v}=(0,r.TH)(),C=!!new URLSearchParams(v).get("isUnlockingAudiobook"),P=!(!(0,$.D)(C)||C),S=(0,ee.Z)(a[0]?.url),[N,w]=(0,n.useState)(!1),[R,U]=(0,n.useState)(!1),D=(0,y.o)(),[L,B]=(0,n.useState)(!1);(0,n.useEffect)((()=>{D({type:"view",intent:"audiobook"})}),[D]);const F=(0,n.useCallback)((()=>{N||D({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-header"}),w(!N)}),[D,N]),M=(0,n.useCallback)((async()=>(b&&b.finalPrice&&await(0,ae.Q)({show_uri:t,currency:b?.finalPrice.currency,price:b?.finalPrice.amount}),Promise.resolve())),[t,b]),_=(0,ne.ye)(t),{togglePlay:G,isPlaying:W,usePlayContextItem:X}=(0,te.n)({uri:t},{featureIdentifier:"audiobook"}),{isActive:H,isPlaying:j,togglePlay:q}=X({uri:s?.uri||""}),Y=(0,n.useCallback)((()=>{s?.uri&&(D({targetUri:s.uri,intent:j?"play":"pause",type:"click"}),q())}),[j,D,q,s?.uri]),V=[{title:"Education",uri:"spotify:genre:educational_podcasts"}],K=V.length>0,{spec:Z,logger:le}=(0,re.fU)(d.createMobilePodcastRatingEventFactory,{data:{identifier:g.Wg.PODCAST_SHOW_AUDIOBOOK,uri:t}});return n.createElement("section",{className:gt.BookPage},n.createElement(m.$,null,c.ag.get("show.page-title",l)),n.createElement(Oe,{name:l,authorName:o,uri:t,coverArt:a,backgroundColor:S,togglePlay:L?M:G,isPlaying:W,isLocked:L}),n.createElement(Le,{name:l,backgroundColor:S,uri:t,togglePlay:L?M:G,isPlaying:W,isLocked:L,isExplicit:p,duration:k,publishDate:f,price:b}),n.createElement("div",{className:gt.bookContent},n.createElement("div",{className:gt.metadataLeft},n.createElement(fe,{htmlDescription:i,narrators:u})),n.createElement("div",{className:gt.metadataRight},s&&n.createElement(J,{label:c.ag.get("sample"),className:gt.sample,images:s.coverArt||[],title:s.name,duration:s.duration.milliseconds,moreButton:n.createElement(z.y,{menu:n.createElement(I.r,{uri:s.uri,showUri:t})},n.createElement(A.z,null)),onClick:Y,isPlaying:j,isActive:H,size:Q.LARGE,contentRating:s.contentRating?.label}),n.createElement("div",{className:gt.ratingAndTopics},n.createElement(He,{rating:E,onClick:()=>{const e=Z.ratingChipButtonFactory({identifier:t}).hitUiNavigate({destination:`spotify:show:${t}:ratings`});le.logInteraction(e),U((e=>!e))}}),K&&n.createElement(O,{topics:V,className:gt.topics}))),n.createElement("div",{className:gt.chapters},n.createElement(dt,{bookUri:t,bookName:l,isFinishedUnlockingJourney:P,usePlayContextItem:X,toggleModal:F,setIsLocked:B}),n.createElement(T.k,{copyrights:h}))),N&&_&&n.createElement(x,{backgroundColor:S,isOpen:N,toggleModal:F,coverArt:a,showAccessInfo:_}),R&&n.createElement(ye,{toggleModal:()=>U(!1),coverArt:a,spec:Z,logger:le,uri:t}))}));var pt=a(72125),yt=a(49207),kt=a(49125),ht=a(26382);const ft={field:ht.ay.PUBLISH_DATE,order:ht.i5.DESC},bt={field:ht.ay.PUBLISH_DATE,order:ht.i5.ASC},vt={episodic:ft,sequential:bt,recent:ft};function Ct(){return new Map([[ft,{key:"newest-to-oldest",value:c.ag.get("shows.sort.newest-to-oldest")}],[bt,{key:"oldest-to-newest",value:c.ag.get("shows.sort.oldest-to-newest")}]])}function Pt(e){return vt[e]}var St=a(86514),Nt=a(14535);const wt=({uri:e,name:t,backgroundColor:a,spec:r})=>{const l=(0,re.$P)(),i=(0,y.o)(),o=!(0,Ue.k)(),[s,m]=(0,be.Z)(e),u=(0,n.useCallback)((()=>{i({targetUri:e,intent:s?"unsave":"save",type:"click"});const t=r.followButtonFactory();l.logInteraction(s?t.hitUnfollow({itemToBeUnfollowed:e}):t.hitFollow({itemToBeFollowed:e})),m(!s)}),[i,e,s,r,l,m]),d=(0,n.useCallback)((()=>{l.logInteraction(r.contextButtonFactory().hitUiReveal())}),[l,r]);return n.createElement(we.o,{backgroundColor:a},n.createElement(we.F,null,n.createElement(Ie.r,{key:"follow-button"},n.createElement(Nt.e,{isFollowing:s,onClick:u,disabled:o})),n.createElement(z.y,{menu:n.createElement(St.M,{uri:e}),onShow:d},n.createElement(A.z,{label:c.ag.get("more.label.context",t)}))))},xt=(0,n.lazy)((()=>a.e(8381).then(a.bind(a,18381))));function At(e){return(0,o.W6)(yt.$f)?n.createElement(n.Suspense,{fallback:!0},n.createElement(xt,e)):null}var It=a(25988),Rt=a(38894),Ut=a(80219),Dt=a(18261),Lt=a(18864),Bt=a(89952),Ft=a(47917),Mt=a(42922),Ot=a(22583);const zt=(0,n.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),Tt=n.memo((function({uri:e,children:t}){return n.createElement(Ot.r,{uri:e,defaultState:[],sortContext:zt,localStorageKey:"showFilterParams-v2"},t)})),_t=(0,n.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:Pt("recent")}),Gt=e=>{const t=Ct();return Array.from(t.keys()).some((({field:t})=>t===e?.field))},Wt=n.memo((function({uri:e,children:t,defaultSortParam:a}){return n.createElement(Ot.r,{uri:e,defaultState:a,sortContext:_t,localStorageKey:"showSortParam",validator:Gt},t)})),Xt="cJJXVm4gQW6AdfCQRhpX",Ht="hTRqaN61SDG95erQGMmx",jt={totalCount:0,nextOffset:0,items:[]},qt=n.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,n.useContext)(_t),{sortState:r}=(0,n.useContext)(zt),l=(0,ne.ZM)(e.uri,a,r),[i,o]=(0,n.useState)(jt),s=(0,n.useRef)(!1),c=(0,n.useRef)(0),m=(0,n.useCallback)(((e=!1)=>{if(!l)return;const t=c.current;null!==t&&(s.current||(s.current=!0,l(t,50).then((a=>{o((n=>{const r=e?[]:[...n.items];return r.splice(t,a.items.length,...a.items),c.current=a.nextOffset,{...a,items:r}})),s.current=!1}))))}),[l]);return(0,n.useEffect)((()=>{o(jt)}),[e.uri]),(0,n.useEffect)((()=>{c.current=0,m(!0)}),[m]),n.createElement(Mt.ZP,{value:"track-list"},n.createElement(je.C,{onReachBottom:m,triggerOnInitialLoad:!0},i.items.map(((a,r)=>n.createElement("div",{className:Ht,key:`${r}${a.uri}`},n.createElement("hr",{className:Xt,"aria-hidden":!0}),n.createElement(Ft.V,{key:`${a.uri}/${r}`,index:r,episode:a,showMetadata:e,usePlayContextItem:t}))))))}));var Yt=a(95289);const Vt={field:ht.YG.ISPLAYED,operator:ht.NK.EQUALS,value:!1},Kt={field:ht.YG.STARTEDPLAYING,operator:ht.NK.GREATER_THAN,value:0};const Zt="all-episodes",Qt=({onFilter:e})=>{const{sortState:t,setSortState:a}=(0,n.useContext)(zt),r=new Map([[Vt,{key:"is-played",value:c.ag.get("shows.filter.unplayed")}],[Kt,{key:"started-playing",value:c.ag.get("shows.filter.in-progress")}]]),l=Array.from(r.values());l.unshift({key:Zt,value:c.ag.get("mwp.podcast.all.episodes")});const i=Array.from(r.keys()),o=(0,n.useCallback)((t=>{if(t===Zt)a([]);else{const e=i.find((e=>r.get(e)?.key===t));e&&a([e])}e()}),[e,a,i,r]);if(!r.size||!i)return null;let s=l[0];const m=Array.from(r.entries()).filter((e=>t?.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return m.length>0&&(s=m[0][1]),n.createElement(Yt.A,{options:l,onSelect:e=>o(e),selected:s,variant:"balladBold",semanticColor:"textBase",heading:c.ag.get("drop_down.filter_by")})},Jt=({onSort:e})=>{const{sortState:t,setSortState:a}=(0,n.useContext)(_t),r=Ct(),l=Array.from(r.values()),i=Array.from(r.keys()),o=(0,n.useCallback)((t=>{const n=i.find((e=>r.get(e)?.key===t));n&&a(n),e()}),[i,e,r,a]);if(!r.size||!t)return null;const s=Array.from(r.keys()).find((e=>e.field===t.field&&e.order===t.order)),m=r.get(s);return n.createElement(Yt.A,{options:l,onSelect:e=>o(e),selected:m,heading:c.ag.get("drop_down.sort_by")})},$t="aQMtxnKeiJqZ9XCcDuZ7",ea="TYB4Y2xQujO7cifhHush",ta="YJlizbhw6DBPHT9OYbdj",aa="klz_XuZpllvTMzpJF1gw",na="TfjbWiK8hca4HHEBnonP",ra="kR0M2WSYVUj4cohADSFM",la="ghfuv80I8uW_ymG_jfx9",ia="jtfSxoRam9rzTtdXIjzc",oa="fejGrhq7pxGC99cUdyVw",sa="T0OjvsNXAJJGd23eBG2m",ca=({spec:e})=>{const t=(0,re.$P)(),{canSort:a,canFilter:r}=(0,ne.zZ)().capabilities,l=(0,n.useCallback)((()=>{t.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[t,e]),i=(0,n.useCallback)((()=>{t.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[t,e]);return n.createElement("div",{className:ra},r&&n.createElement("div",{className:ia},n.createElement(Qt,{onFilter:l})),!r&&n.createElement(E.Dy,{as:"h3",variant:"canon",semanticColor:"textBase",className:oa},c.ag.get("mwp.podcast.all.episodes")),a&&n.createElement("div",{className:la},n.createElement(Jt,{onSort:i})))},ma=e=>{switch(e){case Ye.it.TRAILER:return c.ag.get("podcasts.next-episode.trailer");case Ye.it.UP_NEXT:return c.ag.get("podcasts.next-episode.up-next");case Ye.it.CONTINUE_LISTENING:return c.ag.get("podcasts.next-episode.continue-listening");case Ye.it.FIRST_PUBLISHED:return c.ag.get("podcasts.next-episode.first-published");case Ye.it.LATEST_PUBLISHED:return c.ag.get("podcasts.next-episode.latest-published");default:return}},ua=({metadata:e,showId:t,spec:a})=>{const{uri:r,trailer:l,topics:i,description:s,htmlDescription:m}=e,u=(0,re.$P)(),d=(0,n.useMemo)((()=>a.episodeListFactory()),[a]),g=(0,o.W6)(yt.Vz),p=(0,y.o)(),k=(0,o.W6)(yt.Cz),h=(0,Rt.g)(),{sortState:f}=(0,n.useContext)(_t),{sortState:b}=(0,n.useContext)(zt),v=(0,ne.zZ)(),{usePlayContextItem:C}=(0,te.n)({uri:r,metadata:{[Bt.sb.SORTING_CRITERIA]:v.getPlayerSort(f),[Bt.sb.FILTERING_PREDICATE]:v.getPlayerFilter(b)}},{featureIdentifier:"show"}),{isActive:P,isPlaying:S,togglePlay:N}=C({uri:l?.uri||""}),w=(0,n.useCallback)((e=>{p({intent:"expand-description",type:"click"});const t=a.aboutSectionFactory().seeMoreButtonFactory(),n=e?t.hitUiReveal():t.hitUiHide();u.logInteraction(n)}),[u,p,a]),x=(0,n.useCallback)(((e,t)=>{const n=a.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});u.logInteraction(n)}),[u,a]),I=(0,Ft.e)(e),R=(0,Ut.s)(l,I),U=(0,n.useCallback)((()=>{l?.uri&&(h?R():(p({targetUri:l.uri,intent:S?"play":"pause",type:"click"}),N()))}),[R,h,S,p,N,l?.uri]),{ref:L,breakpoint:B}=(0,Lt.Db)({[Lt.Uo.MEDIUM]:0,[Lt.Uo.LARGE]:600}),F=i.length>0,M=s||k&&m,_=M||F;return n.createElement("div",{className:ea},n.createElement("div",{className:ta},_&&n.createElement(n.Fragment,null,n.createElement(E.Dy,{as:"h3",variant:"canon",semanticColor:"textBase",className:oa},c.ag.get("artist.about")),M&&n.createElement(ke.o,{maxLines:4,content:(s||"").trim(),onExpanded:w,htmlContent:k&&m?m:void 0,LinkComponent:D.Z}),F&&n.createElement(O,{topics:i,onClick:x})),n.createElement(At,{showId:t,uri:r}),l&&!g&&n.createElement(Dt._,{menu:n.createElement(It.k,{uri:l.uri,showUri:r,sharingInfo:l.sharingInfo})},n.createElement(J,{label:c.ag.get("track-trailer"),className:sa,images:l.coverArt||[],title:l.name,duration:l.duration.milliseconds,moreButton:n.createElement(z.y,{menu:n.createElement(It.k,{uri:l.uri,sharingInfo:l.sharingInfo,showUri:r})},n.createElement(A.z,null)),onClick:U,isPlaying:S,isActive:P,size:Q.LARGE,contentRating:l.contentRating?.label}))),n.createElement(Lt.ZU.Provider,{value:B},n.createElement("div",{className:na,"data-testid":"show-all-episode-list",ref:L},g&&e.nextBestEpisode&&n.createElement(Ft.V,{showMetadata:e,episode:e.nextBestEpisode.data,usePlayContextItem:C,status:ma(e.nextBestEpisode.type),variant:"next-best-episode"}),n.createElement(ca,{spec:a}),n.createElement(re.Nh,{spec:d},n.createElement(qt,{showMetadata:e,usePlayContextItem:C})))),n.createElement(T.k,{copyrights:[]}))};var da=a(51775);const ga=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:r,name:l,podcastType:i,publisherName:o}=e,{isXSOnly:s,isSMOnly:m}=(0,da.e)(),u=s||m;return n.createElement(Be.gF,{backgroundColor:t},n.createElement(Fe.W,null,n.createElement(Me.i,{text:l,dragUri:a,dragLabel:l})),n.createElement("div",{className:aa},n.createElement(Dt._,{menu:n.createElement(St.M,{uri:a})},n.createElement(Be.Oe,{loading:"eager",name:l,images:r,placeholderType:"show",shape:Be.Kc.ROUNDED_CORNERS}))),n.createElement(Be.sP,null,n.createElement(Be.dy,{small:!0,uppercase:!0},"SHOW"===i?c.ag.get("type.show"):c.ag.get("type.podcast")),n.createElement(Dt._,{menu:n.createElement(St.M,{uri:a})},n.createElement(Be.xd,{dragUri:a,dragLabel:l},n.createElement("span",{"data-testid":"show-title"},l))),n.createElement(Be.dy,{large:!u,medium:u,bold:!0},o)))},Ea=({metadata:e,showId:t})=>{const{coverArt:a,name:r,uri:l}=e,{spec:i}=(0,re.fU)(s.createDesktopPodcastEventFactory,{data:{uri:l}}),o=(0,n.useMemo)((()=>i.actionBarFactory()),[i]),u=(0,ee.Z)(a[0]?.url||null);return n.createElement("section",{className:$t},n.createElement(m.$,null,c.ag.get("podcasts.show.seo.title",{name:r})),n.createElement(ga,{metadata:e,backgroundColor:u}),n.createElement(wt,{uri:l,name:r,backgroundColor:u,spec:o}),n.createElement(ua,{metadata:e,showId:t,spec:i}))},pa=n.memo((function(){const{showId:e}=(0,r.UO)(),t=`spotify:show:${e}`,a=(0,o.W6)(yt.uB),l=(0,o.W6)(yt.Nf),s=(0,kt.l)(t,a);return s&&(!(0,Ye.MP)(s)||s.userCreated?.userUri&&l)?(0,Ye.l6)(s)?n.createElement(n.Suspense,{fallback:null},n.createElement(Et,{metadata:s})):(0,Ye.MP)(s)&&l?n.createElement(pt.A,{to:i().from(s.userCreated?.userUri).toURLPath(!0)}):n.createElement(n.Suspense,{fallback:null},n.createElement(Tt,{uri:s.uri},n.createElement(Wt,{uri:s.uri,defaultSortParam:Pt(s.consumptionOrder)},n.createElement(Ea,{showId:e,metadata:s})))):n.createElement(u.h,{hasError:!1,errorMessage:c.ag.get("error.not_found.title.podcast")})}))},94233:(e,t,a)=>{a.d(t,{k:()=>i});var n=a(67294),r=a(28760);const l="rTMkDBDp47Eo12ZEQv4U",i=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map(((e,t)=>{const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let l;return l="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,n.createElement(r.Dy,{as:"p",variant:"finale",key:t,dir:"auto"},`${l} ${a}`)}));return t&&a.unshift(n.createElement(r.Dy,{as:"p",variant:"finale",key:a.length,dir:"auto"},t)),n.createElement("div",{className:l},a)}},14535:(e,t,a)=>{a.d(t,{e:()=>m});var n=a(67294),r=a(96206),l=a(94184),i=a.n(l);const o="aAr9nYtPsG7P2LRzciXc",s="fBTYgGyvIbHizHIj7AAX",c="oUzIIkcyBdRs7hrwbwIo",m=n.memo((function({isFollowing:e,onClick:t,disabled:a=!1,buttonText:l}){const m=e?r.ag.get("following"):r.ag.get("follow");return n.createElement("button",{type:"button",className:i()(o,{[s]:e,[c]:a}),onClick:t},l||m)}))}}]);
//# sourceMappingURL=xpui-routes-show.js.map